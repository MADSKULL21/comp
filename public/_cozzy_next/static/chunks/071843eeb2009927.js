(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13354,e=>{"use strict";var t=e.i(85390),r=e.i(77707),o=(e,t,r,o,i,a,s,n)=>{let c=document.documentElement,l=["light","dark"];function u(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,o=r&&a?i.map(e=>a[e]||e):i;r?(c.classList.remove(...o),c.classList.add(a&&a[t]?a[t]:t)):c.setAttribute(e,t)}),r=t,n&&l.includes(r)&&(c.style.colorScheme=r)}if(o)u(o);else try{let e=localStorage.getItem(t)||r,o=s&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;u(o)}catch(e){}},i=r.createContext(void 0),a={setTheme:e=>{},themes:[]};r.memo(({forcedTheme:e,storageKey:t,attribute:i,enableSystem:a,enableColorScheme:s,defaultTheme:n,value:c,themes:l,nonce:u,scriptProps:m})=>{let g=JSON.stringify([i,t,n,e,l,c,a,s]).slice(1,-1);return r.createElement("script",{...m,suppressHydrationWarning:!0,nonce:"u"<typeof window?u:"",dangerouslySetInnerHTML:{__html:`(${o.toString()})(${g})`}})});var s=e.i(30687);let n=({...e})=>{var o;let{theme:n="system"}=null!=(o=r.useContext(i))?o:a;return(0,t.jsx)(s.Toaster,{theme:n,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};e.s(["Toaster",()=>n],13354)},82014,e=>{"use strict";var t=e.i(85390),r=e.i(77707);let o="pomodoro-settings",i="pomodoro-state",a={focusTime:25,breakTime:5,longBreakTime:15,cycles:4,autoStart:!1},s={isRunning:!1,isPaused:!1,currentCycle:1,totalCycles:4,currentPhase:"focus",timeRemaining:1500,completedCycles:0},n={getSettings(){try{let e=localStorage.getItem(o);if(e)return{...a,...JSON.parse(e)}}catch(e){console.error("Error reading pomodoro settings from localStorage:",e)}return a},setSettings(e){try{localStorage.setItem(o,JSON.stringify(e))}catch(e){console.error("Error saving pomodoro settings to localStorage:",e)}},getState(){try{let e=localStorage.getItem(i);if(e)return{...s,...JSON.parse(e)}}catch(e){console.error("Error reading pomodoro state from localStorage:",e)}return s},setState(e){try{localStorage.setItem(i,JSON.stringify(e))}catch(e){console.error("Error saving pomodoro state to localStorage:",e)}},clearState(){try{localStorage.removeItem(i)}catch(e){console.error("Error clearing pomodoro state from localStorage:",e)}},reset(){try{localStorage.removeItem(o),localStorage.removeItem(i)}catch(e){console.error("Error resetting pomodoro storage:",e)}}},c=(0,r.createContext)(void 0);e.s(["PomodoroProvider",0,({children:e})=>{let[o,i]=(0,r.useState)(n.getSettings()),[a,s]=(0,r.useState)(n.getState()),[l,u]=(0,r.useState)(!1),m=(0,r.useRef)(null),g=(0,r.useRef)("default");(0,r.useEffect)(()=>{"Notification"in window&&(g.current=Notification.permission,"default"===Notification.permission&&Notification.requestPermission().then(e=>{g.current=e}).catch(e=>{console.error("Error requesting notification permission:",e)}))},[]);let d=(0,r.useCallback)((e,t,r)=>{if("Notification"in window)if(g.current=Notification.permission,"granted"===g.current)try{let o=new Notification(e,{body:t,icon:r||"/favicon.ico",requireInteraction:!0,tag:"pomodoro-timer"});setTimeout(()=>{o.close()},1e4),o.onclick=()=>{window.focus(),o.close()}}catch(e){console.error("Error creating notification:",e)}else"denied"===g.current||Notification.requestPermission().then(o=>{g.current=o,"granted"===o&&d(e,t,r)})},[]),f=(0,r.useCallback)((e,t)=>{if("focus"===e.currentPhase)if(e.currentCycle>=t.cycles)return{phase:"longBreak",timeRemaining:60*t.longBreakTime,cycle:1,completedCycles:e.completedCycles+1};else return{phase:"break",timeRemaining:60*t.breakTime,cycle:e.currentCycle+1,completedCycles:e.completedCycles};return{phase:"focus",timeRemaining:60*t.focusTime,cycle:e.currentCycle,completedCycles:e.completedCycles}},[]),p=(0,r.useCallback)(()=>{s(e=>{let t=f(e,o);d("Pomodoro Timer",`${{focus:"Focus time is over! Time for a break.",break:"Break time is over! Ready to focus?",longBreak:"Long break is over! Ready for a new session?"}[e.currentPhase]} ${{focus:"Time to focus!",break:"Time for a short break!",longBreak:"Time for a long break!"}[t.phase]}`);let r={...e,currentPhase:t.phase,timeRemaining:t.timeRemaining,currentCycle:t.cycle,completedCycles:t.completedCycles,isRunning:o.autoStart,isPaused:!o.autoStart};return n.setState(r),r}),!o.autoStart&&m.current&&(clearInterval(m.current),m.current=null)},[o,f,d]);(0,r.useEffect)(()=>(a.isRunning&&!a.isPaused?m.current=setInterval(()=>{s(e=>{if(e.timeRemaining<=1)return m.current&&(clearInterval(m.current),m.current=null),setTimeout(()=>{p()},0),{...e,timeRemaining:0};let t={...e,timeRemaining:e.timeRemaining-1};return n.setState(t),t})},1e3):m.current&&(clearInterval(m.current),m.current=null),()=>{m.current&&(clearInterval(m.current),m.current=null)}),[a.isRunning,a.isPaused,p]),(0,r.useEffect)(()=>{0===a.timeRemaining&&(a.isRunning||a.isPaused)&&a.timeRemaining!==60*o.focusTime&&p()},[a.timeRemaining,a.isRunning,a.isPaused,p,o.focusTime]);let y=(0,r.useCallback)(e=>{if(i(e),n.setSettings(e),!a.isRunning){let t={focus:60*e.focusTime,break:60*e.breakTime,longBreak:60*e.longBreakTime},r={...a,timeRemaining:t[a.currentPhase],totalCycles:e.cycles};s(r),n.setState(r)}},[a]),h=(0,r.useCallback)(()=>{s(e=>{let t={...e,isRunning:!0,isPaused:!1};return n.setState(t),t})},[]),S=(0,r.useCallback)(()=>{s(e=>{let t={...e,isRunning:!1,isPaused:!0};return n.setState(t),t})},[]),C=(0,r.useCallback)(()=>{let e={isRunning:!1,isPaused:!1,currentCycle:1,totalCycles:o.cycles,currentPhase:"focus",timeRemaining:60*o.focusTime,completedCycles:0};s(e),n.setState(e)},[o]),k=(0,r.useCallback)(()=>{p()},[p]);return(0,t.jsx)(c.Provider,{value:{settings:o,state:a,updateSettings:y,startTimer:h,pauseTimer:S,resetTimer:C,skipPhase:k,isConfiguring:l,setIsConfiguring:u},children:e})},"usePomodoroContext",0,()=>{let e=(0,r.useContext)(c);if(void 0===e)throw Error("usePomodoroContext must be used within a PomodoroProvider");return e}],82014)},10074,e=>{"use strict";var t=e.i(80236),r=e.i(77707),o=e.i(59141);function i({children:e}){return!function(){let{data:e,status:i}=(0,t.useSession)();(0,r.useEffect)(()=>{"authenticated"===i&&e?.user?.id&&(async()=>{let t=Notification.permission,r=e.user?.id;r&&("default"===t?await (0,o.requestNotificationPermission)()&&await (0,o.registerFcmToken)(r):"granted"===t&&await (0,o.registerFcmToken)(r))})()},[e?.user?.id,i])}(),e}e.s(["FcmWrapper",()=>i],10074)}]);