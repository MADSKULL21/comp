import"../chunks/CPkq-MRm.js";import{p as F,f as G,b as r,g as o,Q as v,c as N,s as w,u as W,a as j,$ as q,n as b,r as H,t as k}from"../chunks/BX4Dnpro.js";import{f as T,b as Q,t as h,a as m,s as x}from"../chunks/DS607QHn.js";import{i as R}from"../chunks/DrMRszh9.js";import{a as Y}from"../chunks/Dbls2O6t.js";import{b as z}from"../chunks/DQsDk8MY.js";import{p as J}from"../chunks/RIzBnn02.js";import{R as K}from"../chunks/BiFOLX6Y.js";import{P as X}from"../chunks/B4cLpuPR.js";import{F as Z}from"../chunks/lt8-OyO6.js";import{i as S}from"../chunks/CG1L1sNd.js";import{L as ee}from"../chunks/BoCk19Um.js";import{W as te}from"../chunks/CGrgT5Uy.js";import{B as oe}from"../chunks/z-ijcZsT.js";import{I as L}from"../chunks/CvJxvGJn.js";import{e as re}from"../chunks/GxSCJhZN.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};t.SENTRY_RELEASE={id:"22f298fe9ac7c9892685cfa634f1dd18037bb1ae"}}catch{}})();try{(function(){var t=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},n=new t.Error().stack;n&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[n]="f668051e-572a-41ed-af31-8bf935a6c008",t._sentryDebugIdIdentifier="sentry-dbid-f668051e-572a-41ed-af31-8bf935a6c008")})()}catch{}var se=T('<div class="form-content svelte-lft159"><!> <!> <!> <!></div>'),ae=T("<!> <!>",1);const ne={hash:"svelte-lft159",code:".form-content.svelte-lft159 {display:flex;flex-direction:column;gap:16px;}"};function Ie(t,n){F(n,!0),Y(t,ne);const B=S(ee),U=S(te);let p=v(void 0),u=v(void 0),a=v(void 0),g=v(void 0),i;async function D(){const d=J.url.searchParams.get("t");if(!d){r(a,"Invalid or missing token");return}if(!(i!=null&&i.isValid())){r(a,"Please check your password and confirmation");return}if(!o(p)||!o(u)){r(a,"Password are required");return}const s=await B.confirmPasswordReset(d,o(p),o(u));if(s.type==="error"){r(a,s.errorMessage,!0),console.error("Confirm password failed:",s.raw??s.errorMessage),r(g,"");return}r(a,void 0),r(g,s.data.message,!0);const _=new URL("successful_login",re.PUBLIC_APP_HOST);_.searchParams.set("access_token",encodeURIComponent(s.data.token));const f=_.toString();window.location.href=f}var y=ae();Q(d=>{q.title="GitButler | Confirm Password"});var $=G(y);K($,{});var V=w($,2);{let d=W(()=>({label:"Login",href:U.loginPath()}));Z(V,{title:"Confirm new password",get backlink(){return o(d)},children:(s,_)=>{var f=se(),I=N(f);z(X(I,{showValidation:!0,get password(){return o(p)},set password(e){r(p,e,!0)},get passwordConfirmation(){return o(u)},set passwordConfirmation(e){r(u,e,!0)}}),e=>i=e,()=>i);var P=w(I,2);{var M=e=>{L(e,{filled:!0,outlined:!1,style:"danger",content:l=>{b();var c=h();k(()=>x(c,o(a))),m(l,c)},$$slots:{content:!0}})};R(P,e=>{o(a)&&e(M)})}var C=w(P,2);{var O=e=>{L(e,{filled:!0,outlined:!1,style:"success",content:l=>{b();var c=h();k(()=>x(c,o(g))),m(l,c)},$$slots:{content:!0}})};R(C,e=>{o(g)&&e(O)})}var A=w(C,2);oe(A,{style:"pop",onclick:D,children:(e,E)=>{b();var l=h("Confirm Password");m(e,l)},$$slots:{default:!0}}),H(f),m(s,f)},$$slots:{default:!0}})}m(t,y),j()}export{Ie as component};
//# sourceMappingURL=14.C1D3hlwV.js.map
