import{w as we}from"../chunks/CoLexm2l.js";import{a as xe,s as ee}from"../chunks/CPkq-MRm.js";import{p as Se,V as Ie,g as o,u as T,b as _,a as $e,Q as j,s as b,c as s,r as n,f as c,n as h,t as B}from"../chunks/BX4Dnpro.js";import{f as v,a as r,t as D,s as N,c as O}from"../chunks/DS607QHn.js";import{i as x}from"../chunks/DrMRszh9.js";import{a as Ee}from"../chunks/Dbls2O6t.js";import{s as qe,g as Te}from"../chunks/6BIzYspF.js";import{U as je}from"../chunks/D69wT3hA.js";import{i as U}from"../chunks/CG1L1sNd.js";import{O as Oe}from"../chunks/vdW0E3mk.js";import{W as ze}from"../chunks/CGrgT5Uy.js";import{B as V}from"../chunks/z-ijcZsT.js";import{e as Pe}from"../chunks/GxSCJhZN.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"22f298fe9ac7c9892685cfa634f1dd18037bb1ae"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},f=new e.Error().stack;f&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[f]="9ee58004-b176-4bac-9698-4f24bde36d0c",e._sentryDebugIdIdentifier="sentry-dbid-9ee58004-b176-4bac-9698-4f24bde36d0c")})()}catch{}const Re=()=>{const e=qe;return{page:{subscribe:e.page.subscribe},navigating:{subscribe:e.navigating.subscribe},updated:e.updated}},ke={subscribe(e){return Re().page.subscribe(e)}},te=(async({params:e})=>({slug:e.slug,code:e.code})),Ce=te?we(te):void 0,at=Object.freeze(Object.defineProperty({__proto__:null,load:Ce},Symbol.toStringTag,{value:"Module"}));var Le=v("<p>You've been invited to join <strong> </strong>.</p> <p>Please log in to continue.</p> <!>",1),Ae=v('<div class="loading-container svelte-1h7q87d"><p>Joining organization...</p></div>'),Je=v('<p> </p> <div class="button-container svelte-1h7q87d"><!></div>',1),Be=v("<p>You have successfully joined the organization.</p> <p>Redirecting to the organization page...</p>",1),De=v(`<p>You've been invited to join <strong> </strong>.</p> <p>Would you like to accept this invitation?</p> <div class="button-container svelte-1h7q87d"><!></div>`,1),Ne=v("<p>Processing your invitation...</p>"),Ue=v('<div class="invite-container svelte-1h7q87d"><div class="invite-card svelte-1h7q87d"><h1 class="svelte-1h7q87d">Organization Invitation</h1> <!></div></div>');const Ve={hash:"svelte-1h7q87d",code:".invite-container.svelte-1h7q87d {display:flex;align-items:center;justify-content:center;min-height:70vh;padding:2rem;}.invite-card.svelte-1h7q87d {width:100%;max-width:500px;padding:2rem;border-radius:0.5rem;background-color:var(--color-bg-card);box-shadow:0 4px 6px rgba(0, 0, 0, 0.1);text-align:center;}h1.svelte-1h7q87d {margin-bottom:1.5rem;font-size:1.5rem;}.loading-container.svelte-1h7q87d {display:flex;flex-direction:column;align-items:center;gap:1rem;}.button-container.svelte-1h7q87d {margin-top:1.5rem;}"};function st(e,f){Se(f,!0),Ee(e,Ve);const[W,oe]=xe(),Y=()=>ee(ke,"$page",W),re=()=>ee(o(ne),"$user",W),ae=U(je),se=U(Oe),ne=T(()=>ae.user),ie=T(()=>Y().params.code),S=T(()=>Y().params.slug),le=U(ze),z=T(()=>{var t;return!!((t=re())!=null&&t.id)});let P=j(!1),I=j(null),M=j(!1),F=j(!1);async function G(){if(o(z)){_(P,!0),_(I,null);try{await se.joinOrganization(o(S),o(ie)),_(M,!0),setTimeout(()=>{Te(le.ownerPath({ownerSlug:o(S)}))},1500)}catch(t){let a="Failed to join organization";try{t.response&&t.response.data?a=t.response.data.error||a:typeof t.message=="string"&&(a=JSON.parse(t.message.replace(/^[^{]*/,"")).error||a)}catch{a=t.message||a}_(I,a,!0),_(P,!1)}}}Ie(()=>{o(z)&&_(F,!0)});function de(){G()}function ce(){G()}function ve(){sessionStorage.setItem("redirectAfterLogin",window.location.href),window.location.href=`${Pe.PUBLIC_APP_HOST}/cloud/login?callback=${window.location.href}`}var R=Ue(),H=s(R),fe=b(s(H),2);{var pe=t=>{var a=Le(),d=c(a),$=b(s(d)),k=s($,!0);n($),h(),n(d);var i=b(d,4);V(i,{onclick:ve,style:"pop",children:(p,Q)=>{h();var C=D("Log In");r(p,C)},$$slots:{default:!0}}),B(()=>N(k,o(S))),r(t,a)},ge=t=>{var a=O(),d=c(a);{var $=i=>{var p=Ae();r(i,p)},k=i=>{var p=O(),Q=c(p);{var C=g=>{var y=Je(),w=c(y),L=s(w,!0);n(w);var E=b(w,2),l=s(E);V(l,{onclick:ce,style:"pop",children:(u,Z)=>{h();var A=D("Try Again");r(u,A)},$$slots:{default:!0}}),n(E),B(()=>N(L,o(I))),r(g,y)},ue=g=>{var y=O(),w=c(y);{var L=l=>{var u=Be();h(2),r(l,u)},E=l=>{var u=O(),Z=c(u);{var A=m=>{var q=De(),J=c(q),K=b(s(J)),_e=s(K,!0);n(K),h(),n(J);var X=b(J,4),be=s(X);V(be,{onclick:de,style:"pop",children:(he,We)=>{h();var ye=D("Join Organization");r(he,ye)},$$slots:{default:!0}}),n(X),B(()=>N(_e,o(S))),r(m,q)},me=m=>{var q=Ne();r(m,q)};x(Z,m=>{o(F)?m(A):m(me,!1)},!0)}r(l,u)};x(w,l=>{o(M)?l(L):l(E,!1)},!0)}r(g,y)};x(Q,g=>{o(I)?g(C):g(ue,!1)},!0)}r(i,p)};x(d,i=>{o(P)?i($):i(k,!1)},!0)}r(t,a)};x(fe,t=>{o(z)?t(ge,!1):t(pe)})}n(H),n(R),r(e,R),$e(),oe()}export{st as component,at as universal};
//# sourceMappingURL=17.BeUglFyg.js.map
