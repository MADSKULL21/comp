import"../chunks/CPkq-MRm.js";import{p as ge,f as V,s as h,a as be,$ as we,c as l,g as e,Q as _,b as t,r as d,n as A,u as K,t as L,R as ye}from"../chunks/BX4Dnpro.js";import{d as xe,f as c,b as Ee,a as o,t as Ie,c as G,s as X}from"../chunks/DS607QHn.js";import{i as F}from"../chunks/DrMRszh9.js";import{a as Ce,s as Z}from"../chunks/Dbls2O6t.js";import{b as Pe}from"../chunks/DQsDk8MY.js";import{R as Te}from"../chunks/BiFOLX6Y.js";import{O as ke}from"../chunks/CnDV5V2J.js";import{F as Re}from"../chunks/DWPnRHGd.js";import{i as ee}from"../chunks/CG1L1sNd.js";import{L as Le}from"../chunks/BoCk19Um.js";import{W as Se}from"../chunks/CGrgT5Uy.js";import{T as $e,B as Be}from"../chunks/z-ijcZsT.js";import{I as te}from"../chunks/CvJxvGJn.js";import{E as De}from"../chunks/CxtGeu4p.js";import{e as Ve}from"../chunks/GxSCJhZN.js";(function(){try{var a=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};a.SENTRY_RELEASE={id:"22f298fe9ac7c9892685cfa634f1dd18037bb1ae"}}catch{}})();try{(function(){var a=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},f=new a.Error().stack;f&&(a._sentryDebugIds=a._sentryDebugIds||{},a._sentryDebugIds[f]="296cc8d5-7bc9-4ff9-b89c-6c076ea40cd3",a._sentryDebugIdIdentifier="sentry-dbid-296cc8d5-7bc9-4ff9-b89c-6c076ea40cd3")})()}catch{}async function Fe(a,f,s,g,C,v,p){if(!e(f)){t(s,"Please enter your email to resend the confirmation email.");return}g();const n=await C.resendConfirmationEmail(e(f));n.type==="error"?(t(s,n.errorMessage,!0),t(v,n.errorCode,!0),t(p,!1),console.error("Failed to resend confirmation email:",n.raw??n.errorMessage)):(t(s,void 0),t(v,void 0),t(p,!0),setTimeout(()=>{t(p,!1)},5e3))}var Me=c("<i>Login</i> to GitButler",1),Oe=c(`<div class="auth-form__footer svelte-1aph6wh"><p>Don't have an account? <a>Sign Up</a></p></div>`),Ue=c("<p>Confirmation email sent! Please check your inbox.</p>"),Ae=c('<p>Verify your email before logging in. Check your inbox or <button type="button" class="resend-btn svelte-1aph6wh">resend the confirmation email</button>.</p>'),Ge=c("<p> </p>"),We=c("<p> </p>"),je=c('<div class="wiggle-animation"><!></div>'),Ne=c('<div id="login-form" class="stack-v"><div class="auth-form__inputs svelte-1aph6wh"><!> <!> <div class="text-12 password-reset svelte-1aph6wh"><a class="svelte-1aph6wh">Forgot password?</a></div></div> <!> <!> <!></div>'),Ye=c("<!> <!>",1);const qe={hash:"svelte-1aph6wh",code:".auth-form__inputs.svelte-1aph6wh {display:flex;flex-direction:column;margin-bottom:24px;gap:14px;}.password-reset.svelte-1aph6wh {display:flex;justify-content:flex-end;color:var(--clr-text-2);}.password-reset.svelte-1aph6wh a:where(.svelte-1aph6wh) {text-decoration:none;}.password-reset.svelte-1aph6wh a:where(.svelte-1aph6wh):hover {color:var(--clr-text-1);text-decoration:underline;}.auth-form__footer.svelte-1aph6wh {display:flex;flex-direction:column;align-items:center;gap:8px;}.resend-btn.svelte-1aph6wh {text-decoration:underline;text-decoration-style:dotted;cursor:pointer;}"};function ct(a,f){ge(f,!0),Ce(a,qe);let s=_(void 0),g=_(void 0),C=_(void 0),v=_(void 0),p=_(void 0),n=_(!1),P=_(0),S=_(!1);function re(){t(v,void 0),t(p,void 0),t(n,!1)}function oe(){t(S,!0),t(P,30);const u=setInterval(()=>{ye(P,-1),e(P)<=0&&(clearInterval(u),t(S,!1),t(P,0))},1e3)}const ae=K(()=>{var u;return!!e(s)&&!!e(g)&&(!e(s)||((u=e(C))==null?void 0:u.isValid()))}),W=ee(Le),j=ee(Se);async function se(u){if(u.preventDefault(),re(),!e(s)||!e(g)){console.error("Email and password are required");return}const b=await W.loginWithEmail(e(s),e(g));if(b.type==="error")t(v,b.errorMessage,!0),t(p,b.errorCode,!0),console.error("Login failed:",b.raw??b.errorMessage);else{const w=b.data,i=new URL("successful_login",Ve.PUBLIC_APP_HOST);i.searchParams.set("access_token",encodeURIComponent(w));const m=i.toString();window.location.href=m}}var N=Ye();Ee(u=>{we.title="GitButler | Login"});var Y=V(N);Te(Y,{});var ne=h(Y,2);Re(ne,{title:w=>{var i=Me();A(),o(w,i)},footer:w=>{var i=Oe(),m=l(i),T=h(l(m));d(m),d(i),L($=>Z(T,"href",$),[()=>j.signupPath()]),o(w,i)},children:(w,i)=>{var m=Ne(),T=l(m),$=l(T);Pe(De($,{label:"Email",placeholder:" ",autocomplete:!1,autocorrect:!1,spellcheck:!0,get value(){return e(s)},set value(r){t(s,r,!0)}}),r=>t(C,r,!0),()=>e(C));var q=h($,2);$e(q,{label:"Password",type:"password",get value(){return e(g)},set value(r){t(g,r,!0)}});var H=h(q,2),ie=l(H);d(H),d(T);var Q=h(T,2);{var le=r=>{te(r,{filled:!0,outlined:!1,style:"success",class:"m-b-16",content:B=>{var R=Ue();o(B,R)},$$slots:{content:!0}})},de=r=>{var k=G(),B=V(k);{var R=M=>{var O=je(),fe=l(O);te(fe,{filled:!0,outlined:!1,style:"danger",class:"m-b-16",content:ve=>{var J=G(),pe=V(J);{var ue=x=>{var E=G(),U=V(E);{var he=I=>{var y=Ae(),D=h(l(y));D.__click=[Fe,s,v,oe,W,p,n],A(),d(y),L(()=>D.disabled=!e(s)||e(S)),o(I,y)},_e=I=>{var y=Ge(),D=l(y);d(y),L(()=>X(D,`Verify your email before logging in. You can resend the confirmation email in ${e(P)??""}
									seconds.`)),o(I,y)};F(U,I=>{e(S)?I(_e,!1):I(he)})}o(x,E)},me=x=>{var E=We(),U=l(E,!0);d(E),L(()=>X(U,e(v))),o(x,E)};F(pe,x=>{e(p)==="email_not_verified"?x(ue):x(me,!1)})}o(ve,J)},$$slots:{content:!0}}),d(O),o(M,O)};F(B,M=>{e(v)&&M(R)},!0)}o(r,k)};F(Q,r=>{e(n)?r(le):r(de,!1)})}var z=h(Q,2);{let r=K(()=>!e(ae));Be(z,{style:"pop",get disabled(){return e(r)},onclick:se,children:(k,B)=>{A();var R=Ie("Log in");o(k,R)},$$slots:{default:!0}})}var ce=h(z,2);ke(ce,{mode:"signup"}),d(m),L(r=>Z(ie,"href",r),[()=>j.resetPasswordPath()]),o(w,m)}}),o(a,N),be()}xe(["click"]);export{ct as component};
//# sourceMappingURL=13.CqiWS79C.js.map
