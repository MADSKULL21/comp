var c=Object.defineProperty;var l=(e,i,t)=>i in e?c(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t;var s=(e,i,t)=>l(e,typeof i!="symbol"?i+"":i,t);import{I as r}from"./CG1L1sNd.js";import{I as f,b as h,e as d}from"./BJQ2FMEW.js";import{n}from"./BegIwIKf.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"22f298fe9ac7c9892685cfa634f1dd18037bb1ae"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},i=new e.Error().stack;i&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[i]="491f4eb9-1794-435a-aba9-e720b510b2f9",e._sentryDebugIdIdentifier="sentry-dbid-491f4eb9-1794-435a-aba9-e720b510b2f9")})()}catch{}function p(e){return{receiveChatMentionEmails:e.receive_chat_mention_emails,receiveChatReplyEmails:e.receive_chat_reply_emails,receiveIssueResolutionEmails:e.receive_issue_resolution_emails,receiveIssueCreationEmails:e.receive_issue_creation_emails,receiveReviewBranchEmails:e.receive_review_branch_emails,receiveSignOffEmails:e.receive_sign_off_emails}}const a="notification-settings";function _(e){return{receive_chat_mention_emails:e.receiveChatMentionEmails,receive_chat_reply_emails:e.receiveChatReplyEmails,receive_issue_resolution_emails:e.receiveIssueResolutionEmails,receive_issue_creation_emails:e.receiveIssueCreationEmails,receive_review_branch_emails:e.receiveReviewBranchEmails,receive_sign_off_emails:e.receiveSignOffEmails}}const m=new r("SshKeyService");class S{constructor(i){s(this,"httpClient");this.httpClient=i}async getSshKeys(){return await this.httpClient.get("/api/user/keys")}async addSshKey(i,t){const o={name:i,public_key:t};return await this.httpClient.post("/api/user/keys",{body:o})}async deleteSshKey(i){await this.httpClient.delete(`/api/user/keys?fingerprint=${i}`)}}class I{constructor(i,t){s(this,"httpClient");s(this,"appDispatch");s(this,"notificationSettingsInterest",new f(h));this.httpClient=i,this.appDispatch=t}getNotificationSettingsInterest(){return this.notificationSettingsInterest.findOrCreateSubscribable({key:a},async()=>{this.appDispatch.dispatch(n.addOne({status:"loading",id:a}));try{const i=await this.httpClient.get("settings/notifications"),t={status:"found",id:a,value:p(i)};this.appDispatch.dispatch(n.upsertOne(t))}catch(i){this.appDispatch.dispatch(n.addOne(d(i,a)))}}).createInterest()}async refresh(){await this.notificationSettingsInterest.invalidate({key:a})}async updateNotificationSettings(i){await this.httpClient.patch("settings/notifications",{body:_(i)}),await this.refresh()}}const g=new r("NotificationSettingsService");export{I as N,S,g as a,m as b,a as c};
//# sourceMappingURL=CuBQQk68.js.map
