var f=Object.defineProperty;var d=(o,e,r)=>e in o?f(o,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):o[e]=r;var i=(o,e,r)=>d(o,typeof e!="symbol"?e+"":e,r);import{I as u}from"./CG1L1sNd.js";import{i as t}from"./C_vCZOVH.js";(function(){try{var o=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};o.SENTRY_RELEASE={id:"22f298fe9ac7c9892685cfa634f1dd18037bb1ae"}}catch{}})();try{(function(){var o=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},e=new o.Error().stack;e&&(o._sentryDebugIds=o._sentryDebugIds||{},o._sentryDebugIds[e]="3de9f7f0-95c7-4869-8365-4e3d232f265f",o._sentryDebugIdIdentifier="sentry-dbid-3de9f7f0-95c7-4869-8365-4e3d232f265f")})()}catch{}const l=new u("LoginService");class p{constructor(e){i(this,"httpClient");this.httpClient=e}async sendGetRequest(e,r){try{const s=await this.httpClient.get(e);return s?{type:"success",data:r?r(s):s}:{type:"error",errorCode:"empty_response",errorMessage:"No data received from server"}}catch(s){return s instanceof Error?{type:"error",errorCode:"network_error",errorMessage:s.message,raw:s}:{type:"error",errorCode:"unknown_error",errorMessage:"An unknown error occurred",raw:s}}}async sendPostRequest(e,r,s){try{const n=await this.httpClient.postRaw(e,{body:r}),a=await n.json();return n.ok?{type:"success",data:s?s(a):a}:{type:"error",errorCode:a.error_code||"unknown_error",errorMessage:a.error||"An unknown error occurred"}}catch(n){return n instanceof Error?{type:"error",errorCode:"network_error",errorMessage:n.message,raw:n}:{type:"error",errorCode:"unknown_error",errorMessage:"An unknown error occurred",raw:n}}}async finalizeAccount(e,r){return await this.sendPostRequest("sessions/finalize",{email:e,login:r},s=>{if(!t(s.message))throw new Error("Invalid message format");return{message:s.message}})}async confirmPasswordReset(e,r,s){return await this.sendPostRequest("sessions/confirm_new_password",{password_reset_token:e,password:r,password_confirmation:s},n=>{if(!t(n.message))throw new Error("Invalid message format");if(!t(n.token))throw new Error("Invalid token format");return{message:n.message,token:n.token}})}async resetPassword(e){return await this.sendPostRequest("sessions/forgot_password",{email:e},r=>{if(!t(r.message))throw new Error("Invalid message format");return{message:r.message}})}async loginWithEmail(e,r){return await this.sendPostRequest("sessions/login_with_email",{email:e,password:r},s=>{if(!t(s.token))throw new Error("Invalid token format");return s.token})}async resendConfirmationEmail(e){return await this.sendPostRequest("sessions/resend_confirmation",{email:e},r=>{if(!t(r.message))throw new Error("Invalid message format");return{message:r.message}})}async token(){return await this.sendGetRequest("sessions/toke_me_bro",e=>{if(!t(e.token))throw new Error("Invalid token format");return e.token})}async createAccountWithEmail(e,r,s,n){return await this.sendPostRequest("sessions/sign_up_email",{login:e,email:r,password:s,password_confirmation:n},a=>{if(!t(a.message))throw new Error("Invalid message format");return{message:a.message}})}}export{l as L,p as a};
//# sourceMappingURL=BoCk19Um.js.map
