var i=Object.defineProperty;var d=(n,t,e)=>t in n?i(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var s=(n,t,e)=>d(n,typeof t!="symbol"?t+"":t,e);import{I as f}from"./CG1L1sNd.js";import{w as c}from"./BX4Dnpro.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};n.SENTRY_RELEASE={id:"22f298fe9ac7c9892685cfa634f1dd18037bb1ae"}}catch{}})();try{(function(){var n=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new n.Error().stack;t&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[t]="9913a835-4037-46ea-9433-0a9381014ff7",n._sentryDebugIdIdentifier="sentry-dbid-9913a835-4037-46ea-9433-0a9381014ff7")})()}catch{}const p=new f("OwnerService");class h{constructor(t){s(this,"ownerCache",new Map);this.httpClient=t}getOwner(t){if(!this.ownerCache.has(t)){const e=c({status:"loading",slug:t},r=>{this.fetchOwner(t).then(o=>{r({status:"found",slug:t,value:o})}).catch(o=>{var a;((a=o.response)==null?void 0:a.status)===404?r({status:"not-found",slug:t,value:{type:"not_found"}}):r({status:"error",slug:t,error:o.message||"Unknown error occurred"})})});this.ownerCache.set(t,e)}return this.ownerCache.get(t)}async fetchOwner(t){try{const e=await this.httpClient.get(`/api/owners/${t}`);return e.owner_type==="organization"?{type:"organization",data:{slug:e.slug,name:e.name||t,description:e.description,createdAt:e.created_at,avatarUrl:e.avatar_url,projects:e.projects,inviteCode:e.invite_code,members:e.members}}:e.owner_type==="user"?{type:"user",data:{id:e.id,name:e.name||e.login,login:e.login,email:e.email,avatarUrl:e.avatar_url,readme:e.readme,website:e.website,twitter:e.twitter,bluesky:e.bluesky,timezone:e.timezone,location:e.location,organizations:e.organizations}}:{type:"not_found"}}catch(e){if(e.response){if(e.response.status===404)return{type:"not_found"};throw new Error(`Error ${e.response.status}: ${e.message}`)}throw e}}}export{h as O,p as a};
//# sourceMappingURL=CJBytYAq.js.map
