var c=Object.defineProperty;var d=(e,t,i)=>t in e?c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var s=(e,t,i)=>d(e,typeof t!="symbol"?t+"":t,i);import{I as l,b as p,e as u}from"./BJQ2FMEW.js";import{d as a}from"./BegIwIKf.js";import{I as f}from"./CG1L1sNd.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"22f298fe9ac7c9892685cfa634f1dd18037bb1ae"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="ab5915da-0f7b-40c8-9248-c1c48ffe8034",e._sentryDebugIdIdentifier="sentry-dbid-ab5915da-0f7b-40c8-9248-c1c48ffe8034")})()}catch{}function h(e){return{uuid:e.uuid,title:e.title,description:e.description,projectSlug:e.project_slug,negativeExample:e.negative_example,positiveExample:e.positive_example,createdAt:e.created_at,updatedAt:e.updated_at}}function b(e){return{project_slug:e.projectSlug,title:e.title,description:e.description,negative_example:e.negativeExample,positive_example:e.positiveExample}}const r="me",w=new f("RulesService");class E{constructor(t,i){s(this,"httpClient");s(this,"appDispatch");s(this,"rulesListInterest",new l(p));this.httpClient=t,this.appDispatch=i}getRuleListInterest(){return this.rulesListInterest.findOrCreateSubscribable({owner:r},async()=>{const t="fake";this.appDispatch.dispatch(a.addOne({status:"loading",id:t}));try{const o=(await this.httpClient.get("rules")).map(n=>({status:"found",id:n.uuid,value:h(n)}));this.appDispatch.dispatch(a.upsertMany(o)),this.appDispatch.dispatch(a.removeOne(t))}catch(i){this.appDispatch.dispatch(a.addOne(u(i,t)))}}).createInterest()}async refecthRuleList(){await this.rulesListInterest.invalidate({owner:r})}async createRule(t){try{await this.httpClient.post("rules",{body:b(t)}),await this.refecthRuleList()}catch(i){console.error("Error creating rule:",i)}}}export{w as R,E as a};
//# sourceMappingURL=BysAMWPW.js.map
